<?xml version="1.0" encoding="utf-8" ?>
<!-- Workout detail: info + manage knop + lijst van oefeningen -->
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="WorkoutCoachV3.Maui.Pages.WorkoutDetailPage"
             x:Name="PageRoot"
             Title="Workout">

    <!-- Layout: header + sectietitel + lijst -->
    <Grid RowDefinitions="Auto,Auto,*" Padding="16" RowSpacing="12">

        <!-- Header: titel/notes/error + manage actie -->
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="12">

            <VerticalStackLayout Spacing="4" VerticalOptions="Center">
                <Label Text="{Binding WorkoutTitle}"
                       FontSize="{OnIdiom Phone=22, Default=28}"
                       FontAttributes="Bold"
                       LineBreakMode="TailTruncation" />

                <Label Text="{Binding Notes}"
                       Opacity="0.7"
                       LineBreakMode="WordWrap" />

                <Label Text="{Binding Error}"
                       TextColor="Red"
                       IsVisible="{Binding Error, Converter={StaticResource StringNotNullOrEmptyConverter}}" />
            </VerticalStackLayout>

            <!-- Manage opent beheerpagina (oefeningen toevoegen/aanpassen) -->
            <Button Grid.Column="1"
                    Text="Manage"
                    Command="{Binding ManageCommand}"
                    Padding="12,10"
                    MinimumHeightRequest="44"
                    VerticalOptions="Start"
                    HorizontalOptions="End" />
        </Grid>

        <!-- Sectietitel -->
        <Label Grid.Row="1"
               Text="Exercises in this workout"
               FontAttributes="Bold"
               FontSize="16" />

        <!-- Oefeningenlijst binnen de workout -->
        <CollectionView Grid.Row="2"
                        ItemsSource="{Binding Items}"
                        ItemSizingStrategy="MeasureAllItems">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,0,0,10"
                           Padding="14"
                           CornerRadius="12"
                           HasShadow="False"
                           BackgroundColor="{AppThemeBinding Light=White, Dark=#1E1E1E}"
                           BorderColor="{AppThemeBinding Light=#DDDDDD, Dark=#333333}">

                        <!-- Item: naam + reps/gewicht -->
                        <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*"
                              RowSpacing="8">

                            <Label Grid.Row="0"
                                   Text="{Binding Name}"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   LineBreakMode="TailTruncation" />

                            <Grid Grid.Row="1"
                                  ColumnDefinitions="Auto,Auto,Auto"
                                  ColumnSpacing="10">

                                <Label Text="Reps:" Opacity="0.7" />
                                <Label Grid.Column="1" Text="{Binding Repetitions}" />

                                <Label Grid.Column="2"
                                       Text="{Binding WeightKg, StringFormat=' | {0} kg'}"
                                       Opacity="0.9" />

                            </Grid>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>

        </CollectionView>

    </Grid>
</ContentPage>
